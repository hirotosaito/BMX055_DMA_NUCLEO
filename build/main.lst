ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SystemClock_Config,"ax",%progbits
  18              		.align	1
  19              		.global	SystemClock_Config
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	SystemClock_Config:
  26              	.LFB132:
  27              		.file 1 "Src/main.c"
   1:Src/main.c    **** /* USER CODE BEGIN Header */
   2:Src/main.c    **** /**
   3:Src/main.c    ****  ******************************************************************************
   4:Src/main.c    ****  * @file           : main.c
   5:Src/main.c    ****  * @brief          : Main program body
   6:Src/main.c    ****  ******************************************************************************
   7:Src/main.c    ****  * @attention
   8:Src/main.c    ****  *
   9:Src/main.c    ****  * <h2><center>&copy; Copyright (c) 2019 STMicroelectronics.
  10:Src/main.c    ****  * All rights reserved.</center></h2>
  11:Src/main.c    ****  *
  12:Src/main.c    ****  * This software component is licensed by ST under BSD 3-Clause license,
  13:Src/main.c    ****  * the "License"; You may not use this file except in compliance with the
  14:Src/main.c    ****  * License. You may obtain a copy of the License at:
  15:Src/main.c    ****  *                        opensource.org/licenses/BSD-3-Clause
  16:Src/main.c    ****  *
  17:Src/main.c    ****  ******************************************************************************
  18:Src/main.c    ****  */
  19:Src/main.c    **** /* USER CODE END Header */
  20:Src/main.c    **** 
  21:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  22:Src/main.c    **** #include "main.h"
  23:Src/main.c    **** #include <stdio.h>
  24:Src/main.c    **** #include <string.h>
  25:Src/main.c    **** #include "dma.h"
  26:Src/main.c    **** #include "gpio.h"
  27:Src/main.c    **** #include "i2c.h"
  28:Src/main.c    **** #include "usart.h"
  29:Src/main.c    **** 
  30:Src/main.c    **** /* Private includes ----------------------------------------------------------*/
  31:Src/main.c    **** /* USER CODE BEGIN Includes */
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 2


  32:Src/main.c    **** 
  33:Src/main.c    **** /* USER CODE END Includes */
  34:Src/main.c    **** 
  35:Src/main.c    **** /* Private typedef -----------------------------------------------------------*/
  36:Src/main.c    **** /* USER CODE BEGIN PTD */
  37:Src/main.c    **** 
  38:Src/main.c    **** /* USER CODE END PTD */
  39:Src/main.c    **** 
  40:Src/main.c    **** /* Private define ------------------------------------------------------------*/
  41:Src/main.c    **** /* USER CODE BEGIN PD */
  42:Src/main.c    **** #define I2C_BUF_SIZE 100
  43:Src/main.c    **** #define true 1
  44:Src/main.c    **** #define false 0
  45:Src/main.c    **** #define Addr_Accl 0x19
  46:Src/main.c    **** /* USER CODE END PD */
  47:Src/main.c    **** 
  48:Src/main.c    **** /* Private macro -------------------------------------------------------------*/
  49:Src/main.c    **** /* USER CODE BEGIN PM */
  50:Src/main.c    **** 
  51:Src/main.c    **** /* USER CODE END PM */
  52:Src/main.c    **** 
  53:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  54:Src/main.c    **** 
  55:Src/main.c    **** /* USER CODE BEGIN PV */
  56:Src/main.c    **** char k[I2C_BUF_SIZE];
  57:Src/main.c    **** uint8_t isxready = false;
  58:Src/main.c    **** uint8_t isyready = false;
  59:Src/main.c    **** uint8_t iszready = false;
  60:Src/main.c    **** 
  61:Src/main.c    **** float xAccl = 0.00;
  62:Src/main.c    **** float yAccl = 0.00;
  63:Src/main.c    **** float zAccl = 0.00;
  64:Src/main.c    **** float f = 3.14;
  65:Src/main.c    **** 
  66:Src/main.c    **** float xGyro;
  67:Src/main.c    **** float yGyro;
  68:Src/main.c    **** float zGyro;
  69:Src/main.c    **** 
  70:Src/main.c    **** int isI2CRunning;
  71:Src/main.c    **** 
  72:Src/main.c    **** typedef struct {
  73:Src/main.c    ****   /* data */
  74:Src/main.c    ****   uint8_t xLSB;
  75:Src/main.c    ****   uint8_t xMSB;
  76:Src/main.c    ****   uint8_t yLSB;
  77:Src/main.c    ****   uint8_t yMSB;
  78:Src/main.c    ****   uint8_t zLSB;
  79:Src/main.c    ****   uint8_t zMSB;  
  80:Src/main.c    **** 
  81:Src/main.c    **** } bmx;
  82:Src/main.c    **** bmx Accl_temp = {0,0,0,0,0,0};
  83:Src/main.c    **** bmx Accl = {0,0,0,0,0,0};
  84:Src/main.c    **** 
  85:Src/main.c    **** 
  86:Src/main.c    **** /* USER CODE END PV */
  87:Src/main.c    **** 
  88:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 3


  89:Src/main.c    **** void SystemClock_Config(void);
  90:Src/main.c    **** /* USER CODE BEGIN PFP */
  91:Src/main.c    **** void Show_float(char*, float);
  92:Src/main.c    **** void BMX_Init(void);
  93:Src/main.c    **** 
  94:Src/main.c    **** /* USER CODE END PFP */
  95:Src/main.c    **** 
  96:Src/main.c    **** /* Private user code ---------------------------------------------------------*/
  97:Src/main.c    **** /* USER CODE BEGIN 0 */
  98:Src/main.c    **** 
  99:Src/main.c    **** 
 100:Src/main.c    **** /* USER CODE END 0 */
 101:Src/main.c    **** 
 102:Src/main.c    **** /**
 103:Src/main.c    ****  * @brief  The application entry point.
 104:Src/main.c    ****  * @retval int
 105:Src/main.c    ****  */
 106:Src/main.c    **** int main(void) {
 107:Src/main.c    ****   /* USER CODE BEGIN 1 */
 108:Src/main.c    **** 
 109:Src/main.c    ****   /* USER CODE END 1 */
 110:Src/main.c    **** 
 111:Src/main.c    ****   /* MCU Configuration--------------------------------------------------------*/
 112:Src/main.c    **** 
 113:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick.
 114:Src/main.c    ****    */
 115:Src/main.c    ****   HAL_Init();
 116:Src/main.c    **** 
 117:Src/main.c    ****   /* USER CODE BEGIN Init */
 118:Src/main.c    **** 
 119:Src/main.c    ****   /* USER CODE END Init */
 120:Src/main.c    **** 
 121:Src/main.c    ****   /* Configure the system clock */
 122:Src/main.c    ****   SystemClock_Config();
 123:Src/main.c    **** 
 124:Src/main.c    ****   /* USER CODE BEGIN SysInit */
 125:Src/main.c    **** 
 126:Src/main.c    ****   /* USER CODE END SysInit */
 127:Src/main.c    **** 
 128:Src/main.c    ****   /* Initialize all configured peripherals */
 129:Src/main.c    ****   MX_GPIO_Init();
 130:Src/main.c    ****   MX_DMA_Init();
 131:Src/main.c    ****   MX_USART2_UART_Init();
 132:Src/main.c    ****   MX_I2C1_Init();
 133:Src/main.c    ****   /* USER CODE BEGIN 2 */
 134:Src/main.c    ****   BMX_Init();
 135:Src/main.c    ****   // first time to read sensor value
 136:Src/main.c    ****   HAL_I2C_Mem_Read_DMA(&hi2c1, Addr_Accl << 1, 0x00, 1,(&Accl_temp), 6);
 137:Src/main.c    ****   /* USER CODE END 2 */
 138:Src/main.c    **** 
 139:Src/main.c    ****   /* Infinite loop */
 140:Src/main.c    ****   /* USER CODE BEGIN WHILE */
 141:Src/main.c    ****   uint8_t i = 0;
 142:Src/main.c    ****   while (1) {
 143:Src/main.c    ****     /* USER CODE END WHILE */
 144:Src/main.c    ****     sprintf(k, "kaisuu : %d\n", i++);
 145:Src/main.c    ****     HAL_UART_Transmit(&huart2, (uint8_t *)(&k[0]), strlen(&k[0]), 100);
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 4


 146:Src/main.c    **** 
 147:Src/main.c    ****     //move the value from temp to buffer
 148:Src/main.c    ****     if(isxready == true){
 149:Src/main.c    ****       Accl.xLSB = Accl_temp.xLSB;
 150:Src/main.c    ****       Accl.xMSB = Accl_temp.xMSB;     
 151:Src/main.c    ****       
 152:Src/main.c    ****       xAccl = ((Accl.xMSB*256) + (Accl.xLSB & 0xF0))/16;
 153:Src/main.c    ****       if(xAccl>2047) xAccl -= 4096;
 154:Src/main.c    ****       xAccl = xAccl*0.0098;
 155:Src/main.c    **** 
 156:Src/main.c    ****       isxready = false;
 157:Src/main.c    ****       Show_float("xAccl = ",xAccl);
 158:Src/main.c    ****     }
 159:Src/main.c    **** 
 160:Src/main.c    ****     if(isyready == true){
 161:Src/main.c    ****       Accl.yLSB = Accl_temp.yLSB;
 162:Src/main.c    ****       Accl.yMSB = Accl_temp.yMSB;
 163:Src/main.c    ****       
 164:Src/main.c    ****       yAccl = ((Accl.yMSB*256) + (Accl.yLSB & 0xF0))/16;
 165:Src/main.c    ****       if(yAccl>2047) yAccl -= 4096; 
 166:Src/main.c    ****       yAccl = yAccl*0.0098;
 167:Src/main.c    **** 
 168:Src/main.c    ****       
 169:Src/main.c    ****       isyready = false;
 170:Src/main.c    ****       Show_float("yAccl = ",yAccl);
 171:Src/main.c    **** 
 172:Src/main.c    ****     }
 173:Src/main.c    **** 
 174:Src/main.c    ****     if(iszready == true){
 175:Src/main.c    ****       Accl.zLSB = Accl_temp.zLSB;
 176:Src/main.c    ****       Accl.zMSB = Accl_temp.zMSB;
 177:Src/main.c    **** 
 178:Src/main.c    ****       zAccl = ((Accl.zMSB*256) + (Accl.zLSB & 0xF0))/16;
 179:Src/main.c    ****       if(zAccl>2047) zAccl -= 4096; 
 180:Src/main.c    ****       zAccl = zAccl*0.0098;
 181:Src/main.c    ****       
 182:Src/main.c    ****       iszready = false;
 183:Src/main.c    ****       Show_float("zAccl = ",zAccl);
 184:Src/main.c    **** 
 185:Src/main.c    ****     }
 186:Src/main.c    **** 
 187:Src/main.c    **** //     HAL_I2C_Mem_Read_DMA(&hi2c1, Addr_Accl << 1, 0x02, 1, &Accl_temp, 6);
 188:Src/main.c    **** /*
 189:Src/main.c    ****     if (isxready == true) {
 190:Src/main.c    ****       sprintf(k, "xready\n");
 191:Src/main.c    ****       HAL_UART_Transmit(&huart2, (uint8_t *)(&k[0]), strlen(&k[0]), 100);
 192:Src/main.c    ****     }
 193:Src/main.c    **** */  
 194:Src/main.c    **** 
 195:Src/main.c    ****     HAL_Delay(1000);
 196:Src/main.c    **** 
 197:Src/main.c    ****     /* USER CODE BEGIN 3 */
 198:Src/main.c    ****   }
 199:Src/main.c    ****   /* USER CODE END 3 */
 200:Src/main.c    **** }
 201:Src/main.c    **** 
 202:Src/main.c    **** 
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 5


 203:Src/main.c    **** 
 204:Src/main.c    **** /**
 205:Src/main.c    ****  * @brief System Clock Configuration
 206:Src/main.c    ****  * @retval None
 207:Src/main.c    ****  */
 208:Src/main.c    **** void SystemClock_Config(void) {
  28              		.loc 1 208 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 224
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 B8B0     		sub	sp, sp, #224
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 232
 209:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  40              		.loc 1 209 0
  41 0004 4422     		movs	r2, #68
  42 0006 0021     		movs	r1, #0
  43 0008 27A8     		add	r0, sp, #156
  44 000a FFF7FEFF 		bl	memset
  45              	.LVL0:
 210:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
  46              		.loc 1 210 0
  47 000e 0024     		movs	r4, #0
  48 0010 2294     		str	r4, [sp, #136]
  49 0012 2394     		str	r4, [sp, #140]
  50 0014 2494     		str	r4, [sp, #144]
  51 0016 2594     		str	r4, [sp, #148]
  52 0018 2694     		str	r4, [sp, #152]
 211:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
  53              		.loc 1 211 0
  54 001a 8822     		movs	r2, #136
  55 001c 2146     		mov	r1, r4
  56 001e 6846     		mov	r0, sp
  57 0020 FFF7FEFF 		bl	memset
  58              	.LVL1:
 212:Src/main.c    **** 
 213:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks
 214:Src/main.c    ****    */
 215:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  59              		.loc 1 215 0
  60 0024 0223     		movs	r3, #2
  61 0026 2793     		str	r3, [sp, #156]
 216:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  62              		.loc 1 216 0
  63 0028 4FF48072 		mov	r2, #256
  64 002c 2A92     		str	r2, [sp, #168]
 217:Src/main.c    ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  65              		.loc 1 217 0
  66 002e 1022     		movs	r2, #16
  67 0030 2B92     		str	r2, [sp, #172]
 218:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  68              		.loc 1 218 0
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 6


  69 0032 3193     		str	r3, [sp, #196]
 219:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  70              		.loc 1 219 0
  71 0034 3293     		str	r3, [sp, #200]
 220:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLM = 1;
  72              		.loc 1 220 0
  73 0036 0122     		movs	r2, #1
  74 0038 3392     		str	r2, [sp, #204]
 221:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLN = 10;
  75              		.loc 1 221 0
  76 003a 0A22     		movs	r2, #10
  77 003c 3492     		str	r2, [sp, #208]
 222:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV7;
  78              		.loc 1 222 0
  79 003e 0722     		movs	r2, #7
  80 0040 3592     		str	r2, [sp, #212]
 223:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLQ = RCC_PLLQ_DIV2;
  81              		.loc 1 223 0
  82 0042 3693     		str	r3, [sp, #216]
 224:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV2;
  83              		.loc 1 224 0
  84 0044 3793     		str	r3, [sp, #220]
 225:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK) {
  85              		.loc 1 225 0
  86 0046 27A8     		add	r0, sp, #156
  87 0048 FFF7FEFF 		bl	HAL_RCC_OscConfig
  88              	.LVL2:
 226:Src/main.c    ****     Error_Handler();
 227:Src/main.c    ****   }
 228:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks
 229:Src/main.c    ****    */
 230:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK |
  89              		.loc 1 230 0
  90 004c 0F23     		movs	r3, #15
  91 004e 2293     		str	r3, [sp, #136]
 231:Src/main.c    ****                                 RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;
 232:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  92              		.loc 1 232 0
  93 0050 0323     		movs	r3, #3
  94 0052 2393     		str	r3, [sp, #140]
 233:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  95              		.loc 1 233 0
  96 0054 2494     		str	r4, [sp, #144]
 234:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
  97              		.loc 1 234 0
  98 0056 2594     		str	r4, [sp, #148]
 235:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
  99              		.loc 1 235 0
 100 0058 2694     		str	r4, [sp, #152]
 236:Src/main.c    **** 
 237:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_4) != HAL_OK) {
 101              		.loc 1 237 0
 102 005a 0421     		movs	r1, #4
 103 005c 22A8     		add	r0, sp, #136
 104 005e FFF7FEFF 		bl	HAL_RCC_ClockConfig
 105              	.LVL3:
 238:Src/main.c    ****     Error_Handler();
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 7


 239:Src/main.c    ****   }
 240:Src/main.c    ****   PeriphClkInit.PeriphClockSelection =
 106              		.loc 1 240 0
 107 0062 4223     		movs	r3, #66
 108 0064 0093     		str	r3, [sp]
 241:Src/main.c    ****       RCC_PERIPHCLK_USART2 | RCC_PERIPHCLK_I2C1;
 242:Src/main.c    ****   PeriphClkInit.Usart2ClockSelection = RCC_USART2CLKSOURCE_PCLK1;
 109              		.loc 1 242 0
 110 0066 0F94     		str	r4, [sp, #60]
 243:Src/main.c    ****   PeriphClkInit.I2c1ClockSelection = RCC_I2C1CLKSOURCE_PCLK1;
 111              		.loc 1 243 0
 112 0068 1494     		str	r4, [sp, #80]
 244:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK) {
 113              		.loc 1 244 0
 114 006a 6846     		mov	r0, sp
 115 006c FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 116              	.LVL4:
 245:Src/main.c    ****     Error_Handler();
 246:Src/main.c    ****   }
 247:Src/main.c    ****   /** Configure the main internal regulator output voltage
 248:Src/main.c    ****    */
 249:Src/main.c    ****   if (HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1) != HAL_OK) {
 117              		.loc 1 249 0
 118 0070 4FF40070 		mov	r0, #512
 119 0074 FFF7FEFF 		bl	HAL_PWREx_ControlVoltageScaling
 120              	.LVL5:
 250:Src/main.c    ****     Error_Handler();
 251:Src/main.c    ****   }
 252:Src/main.c    **** }
 121              		.loc 1 252 0
 122 0078 38B0     		add	sp, sp, #224
 123              	.LCFI2:
 124              		.cfi_def_cfa_offset 8
 125              		@ sp needed
 126 007a 10BD     		pop	{r4, pc}
 127              		.cfi_endproc
 128              	.LFE132:
 130              		.section	.text.BMX_Init,"ax",%progbits
 131              		.align	1
 132              		.global	BMX_Init
 133              		.syntax unified
 134              		.thumb
 135              		.thumb_func
 136              		.fpu fpv4-sp-d16
 138              	BMX_Init:
 139              	.LFB133:
 253:Src/main.c    **** 
 254:Src/main.c    **** /* USER CODE BEGIN 4 */
 255:Src/main.c    **** 
 256:Src/main.c    **** /** BMX Init*/
 257:Src/main.c    **** void BMX_Init(void){
 140              		.loc 1 257 0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 8
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144 0000 70B5     		push	{r4, r5, r6, lr}
 145              	.LCFI3:
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 8


 146              		.cfi_def_cfa_offset 16
 147              		.cfi_offset 4, -16
 148              		.cfi_offset 5, -12
 149              		.cfi_offset 6, -8
 150              		.cfi_offset 14, -4
 151 0002 86B0     		sub	sp, sp, #24
 152              	.LCFI4:
 153              		.cfi_def_cfa_offset 40
 154              	.LVL6:
 258:Src/main.c    **** // init x axis 
 259:Src/main.c    **** 
 260:Src/main.c    **** //select PMU band width resisiter and set to 7.81 Hz
 261:Src/main.c    **** uint16_t Mem_PMU_BW = 0x10;
 262:Src/main.c    **** uint8_t p_BW = 0x08;
 155              		.loc 1 262 0
 156 0004 06AB     		add	r3, sp, #24
 157 0006 0822     		movs	r2, #8
 158 0008 03F8012D 		strb	r2, [r3, #-1]!
 263:Src/main.c    **** HAL_I2C_Mem_Write(&hi2c1,Addr_Accl<<1,Mem_PMU_BW,1,&p_BW,1,100);
 159              		.loc 1 263 0
 160 000c 184E     		ldr	r6, .L5
 161 000e 6424     		movs	r4, #100
 162 0010 0294     		str	r4, [sp, #8]
 163 0012 0125     		movs	r5, #1
 164 0014 0195     		str	r5, [sp, #4]
 165 0016 0093     		str	r3, [sp]
 166 0018 2B46     		mov	r3, r5
 167 001a 1022     		movs	r2, #16
 168 001c 3221     		movs	r1, #50
 169 001e 3046     		mov	r0, r6
 170 0020 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 171              	.LVL7:
 264:Src/main.c    **** HAL_Delay(100);
 172              		.loc 1 264 0
 173 0024 2046     		mov	r0, r4
 174 0026 FFF7FEFF 		bl	HAL_Delay
 175              	.LVL8:
 265:Src/main.c    **** 
 266:Src/main.c    **** //select PMU range resisiter and set to -2
 267:Src/main.c    **** uint16_t Mem_PMU_Range = 0x0F;
 268:Src/main.c    **** uint8_t p_Range = 0x03;
 176              		.loc 1 268 0
 177 002a 06AB     		add	r3, sp, #24
 178 002c 0322     		movs	r2, #3
 179 002e 03F8022D 		strb	r2, [r3, #-2]!
 269:Src/main.c    **** HAL_I2C_Mem_Write(&hi2c1,Addr_Accl<<1,Mem_PMU_Range,1,&p_Range,1,100);
 180              		.loc 1 269 0
 181 0032 0294     		str	r4, [sp, #8]
 182 0034 0195     		str	r5, [sp, #4]
 183 0036 0093     		str	r3, [sp]
 184 0038 2B46     		mov	r3, r5
 185 003a 0F22     		movs	r2, #15
 186 003c 3221     		movs	r1, #50
 187 003e 3046     		mov	r0, r6
 188 0040 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 189              	.LVL9:
 270:Src/main.c    **** HAL_Delay(100);
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 9


 190              		.loc 1 270 0
 191 0044 2046     		mov	r0, r4
 192 0046 FFF7FEFF 		bl	HAL_Delay
 193              	.LVL10:
 271:Src/main.c    **** 
 272:Src/main.c    **** //select PMU LPW resisiter and Normal mode
 273:Src/main.c    **** uint16_t Mem_PMU_LPW = 0x11;
 274:Src/main.c    **** uint8_t p_LPW = 0x00;
 194              		.loc 1 274 0
 195 004a 06AB     		add	r3, sp, #24
 196 004c 0022     		movs	r2, #0
 197 004e 03F8032D 		strb	r2, [r3, #-3]!
 275:Src/main.c    **** HAL_I2C_Mem_Write(&hi2c1,Addr_Accl<<1,Mem_PMU_LPW,1,&p_LPW,1,100);
 198              		.loc 1 275 0
 199 0052 0294     		str	r4, [sp, #8]
 200 0054 0195     		str	r5, [sp, #4]
 201 0056 0093     		str	r3, [sp]
 202 0058 2B46     		mov	r3, r5
 203 005a 1122     		movs	r2, #17
 204 005c 3221     		movs	r1, #50
 205 005e 3046     		mov	r0, r6
 206 0060 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 207              	.LVL11:
 276:Src/main.c    **** HAL_Delay(100);
 208              		.loc 1 276 0
 209 0064 2046     		mov	r0, r4
 210 0066 FFF7FEFF 		bl	HAL_Delay
 211              	.LVL12:
 277:Src/main.c    **** 
 278:Src/main.c    **** }
 212              		.loc 1 278 0
 213 006a 06B0     		add	sp, sp, #24
 214              	.LCFI5:
 215              		.cfi_def_cfa_offset 16
 216              		@ sp needed
 217 006c 70BD     		pop	{r4, r5, r6, pc}
 218              	.L6:
 219 006e 00BF     		.align	2
 220              	.L5:
 221 0070 00000000 		.word	hi2c1
 222              		.cfi_endproc
 223              	.LFE133:
 225              		.section	.text.HAL_I2C_MemRxCpltCallback,"ax",%progbits
 226              		.align	1
 227              		.global	HAL_I2C_MemRxCpltCallback
 228              		.syntax unified
 229              		.thumb
 230              		.thumb_func
 231              		.fpu fpv4-sp-d16
 233              	HAL_I2C_MemRxCpltCallback:
 234              	.LFB134:
 279:Src/main.c    **** 
 280:Src/main.c    **** void HAL_I2C_MemRxCpltCallback(I2C_HandleTypeDef *hi2c1) {
 235              		.loc 1 280 0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 0
 238              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 10


 239              	.LVL13:
 240 0000 00B5     		push	{lr}
 241              	.LCFI6:
 242              		.cfi_def_cfa_offset 4
 243              		.cfi_offset 14, -4
 244 0002 83B0     		sub	sp, sp, #12
 245              	.LCFI7:
 246              		.cfi_def_cfa_offset 16
 281:Src/main.c    ****   if((Accl_temp.xLSB && 0b00000001 == 0b00000001)) isxready = true;
 247              		.loc 1 281 0
 248 0004 0E4B     		ldr	r3, .L12
 249 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 250 0008 13B1     		cbz	r3, .L8
 251              		.loc 1 281 0 is_stmt 0 discriminator 1
 252 000a 0122     		movs	r2, #1
 253 000c 0D4B     		ldr	r3, .L12+4
 254 000e 1A70     		strb	r2, [r3]
 255              	.L8:
 282:Src/main.c    ****   if((Accl_temp.yLSB && 0b00000001 == 0b00000001)) isyready = true;
 256              		.loc 1 282 0 is_stmt 1
 257 0010 0B4B     		ldr	r3, .L12
 258 0012 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 259 0014 13B1     		cbz	r3, .L9
 260              		.loc 1 282 0 is_stmt 0 discriminator 1
 261 0016 0122     		movs	r2, #1
 262 0018 0B4B     		ldr	r3, .L12+8
 263 001a 1A70     		strb	r2, [r3]
 264              	.L9:
 283:Src/main.c    ****   if((Accl_temp.zLSB && 0b00000001 == 0b00000001)) iszready = true;
 265              		.loc 1 283 0 is_stmt 1
 266 001c 084B     		ldr	r3, .L12
 267 001e 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 268 0020 13B1     		cbz	r3, .L10
 269              		.loc 1 283 0 is_stmt 0 discriminator 1
 270 0022 0122     		movs	r2, #1
 271 0024 094B     		ldr	r3, .L12+12
 272 0026 1A70     		strb	r2, [r3]
 273              	.L10:
 284:Src/main.c    ****   HAL_I2C_Mem_Read_DMA(hi2c1, Addr_Accl << 1, 0x02, 1, &Accl_temp, 6); //é–¢æ•°å®šç¾©ã§hi2cã®ãƒã
 274              		.loc 1 284 0 is_stmt 1
 275 0028 0623     		movs	r3, #6
 276 002a 0193     		str	r3, [sp, #4]
 277 002c 044B     		ldr	r3, .L12
 278 002e 0093     		str	r3, [sp]
 279 0030 0123     		movs	r3, #1
 280 0032 0222     		movs	r2, #2
 281 0034 3221     		movs	r1, #50
 282 0036 FFF7FEFF 		bl	HAL_I2C_Mem_Read_DMA
 283              	.LVL14:
 285:Src/main.c    **** }
 284              		.loc 1 285 0
 285 003a 03B0     		add	sp, sp, #12
 286              	.LCFI8:
 287              		.cfi_def_cfa_offset 4
 288              		@ sp needed
 289 003c 5DF804FB 		ldr	pc, [sp], #4
 290              	.L13:
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 11


 291              		.align	2
 292              	.L12:
 293 0040 00000000 		.word	.LANCHOR0
 294 0044 00000000 		.word	.LANCHOR1
 295 0048 00000000 		.word	.LANCHOR2
 296 004c 00000000 		.word	.LANCHOR3
 297              		.cfi_endproc
 298              	.LFE134:
 300              		.global	__aeabi_f2d
 301              		.global	__aeabi_i2d
 302              		.global	__aeabi_dsub
 303              		.global	__aeabi_d2f
 304              		.section	.text.Show_float,"ax",%progbits
 305              		.align	1
 306              		.global	Show_float
 307              		.syntax unified
 308              		.thumb
 309              		.thumb_func
 310              		.fpu fpv4-sp-d16
 312              	Show_float:
 313              	.LFB135:
 286:Src/main.c    **** 
 287:Src/main.c    **** void Show_float(char *str, float value){
 314              		.loc 1 287 0
 315              		.cfi_startproc
 316              		@ args = 0, pretend = 0, frame = 24
 317              		@ frame_needed = 0, uses_anonymous_args = 0
 318              	.LVL15:
 319 0000 2DE97043 		push	{r4, r5, r6, r8, r9, lr}
 320              	.LCFI9:
 321              		.cfi_def_cfa_offset 24
 322              		.cfi_offset 4, -24
 323              		.cfi_offset 5, -20
 324              		.cfi_offset 6, -16
 325              		.cfi_offset 8, -12
 326              		.cfi_offset 9, -8
 327              		.cfi_offset 14, -4
 328 0004 2DED028B 		vpush.64	{d8}
 329              	.LCFI10:
 330              		.cfi_def_cfa_offset 32
 331              		.cfi_offset 80, -32
 332              		.cfi_offset 81, -28
 333 0008 88B0     		sub	sp, sp, #32
 334              	.LCFI11:
 335              		.cfi_def_cfa_offset 64
 336 000a 0546     		mov	r5, r0
 337 000c B0EE408A 		vmov.f32	s16, s0
 288:Src/main.c    ****   char temp[20];
 289:Src/main.c    ****   char *tempsign = (value < 0) ? "-":"";
 338              		.loc 1 289 0
 339 0010 B5EEC00A 		vcmpe.f32	s0, #0
 340 0014 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 341 0018 3AD4     		bmi	.L24
 342 001a 204E     		ldr	r6, .L26
 343              	.L15:
 344              	.LVL16:
 290:Src/main.c    ****   double tempval = (value<0) ? -1*value:value;
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 12


 345              		.loc 1 290 0 discriminator 4
 346 001c B5EEC08A 		vcmpe.f32	s16, #0
 347 0020 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 348 0024 36D4     		bmi	.L25
 349              	.L17:
 350 0026 18EE100A 		vmov	r0, s16
 351              	.LVL17:
 352 002a FFF7FEFF 		bl	__aeabi_f2d
 353              	.LVL18:
 354 002e 8046     		mov	r8, r0
 355 0030 8946     		mov	r9, r1
 356              	.LVL19:
 291:Src/main.c    ****   int tempInt1 = (int)tempval;
 357              		.loc 1 291 0 discriminator 4
 358 0032 FDEEC87A 		vcvt.s32.f32	s15, s16
 359 0036 17EE904A 		vmov	r4, s15	@ int
 360              	.LVL20:
 292:Src/main.c    ****   float tempfrac = tempval - tempInt1;
 361              		.loc 1 292 0 discriminator 4
 362 003a 17EE900A 		vmov	r0, s15	@ int
 363 003e FFF7FEFF 		bl	__aeabi_i2d
 364              	.LVL21:
 365 0042 0246     		mov	r2, r0
 366 0044 0B46     		mov	r3, r1
 367 0046 4046     		mov	r0, r8
 368 0048 4946     		mov	r1, r9
 369 004a FFF7FEFF 		bl	__aeabi_dsub
 370              	.LVL22:
 371 004e FFF7FEFF 		bl	__aeabi_d2f
 372              	.LVL23:
 293:Src/main.c    ****   int tempInt2 = trunc(tempfrac*100000);  
 373              		.loc 1 293 0 discriminator 4
 374 0052 DFED137A 		vldr.32	s15, .L26+4
 375 0056 07EE100A 		vmov	s14, r0
 376 005a 67EE277A 		vmul.f32	s15, s14, s15
 377 005e FDEEE77A 		vcvt.s32.f32	s15, s15
 378              	.LVL24:
 294:Src/main.c    **** 
 295:Src/main.c    ****   sprintf(temp,"%s%s%d.%04d\n",str,tempsign,tempInt1,tempInt2);
 379              		.loc 1 295 0 discriminator 4
 380 0062 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 381 0066 0094     		str	r4, [sp]
 382 0068 3346     		mov	r3, r6
 383 006a 2A46     		mov	r2, r5
 384 006c 0D49     		ldr	r1, .L26+8
 385 006e 03A8     		add	r0, sp, #12
 386              	.LVL25:
 387 0070 FFF7FEFF 		bl	sprintf
 388              	.LVL26:
 296:Src/main.c    ****   HAL_UART_Transmit (&huart2,(uint8_t*)(&temp[0]),strlen(&temp[0]),100);
 389              		.loc 1 296 0 discriminator 4
 390 0074 03A8     		add	r0, sp, #12
 391 0076 FFF7FEFF 		bl	strlen
 392              	.LVL27:
 393 007a 6423     		movs	r3, #100
 394 007c 82B2     		uxth	r2, r0
 395 007e 03A9     		add	r1, sp, #12
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 13


 396 0080 0948     		ldr	r0, .L26+12
 397 0082 FFF7FEFF 		bl	HAL_UART_Transmit
 398              	.LVL28:
 297:Src/main.c    **** }
 399              		.loc 1 297 0 discriminator 4
 400 0086 08B0     		add	sp, sp, #32
 401              	.LCFI12:
 402              		.cfi_remember_state
 403              		.cfi_def_cfa_offset 32
 404              		@ sp needed
 405 0088 BDEC028B 		vldm	sp!, {d8}
 406              	.LCFI13:
 407              		.cfi_restore 80
 408              		.cfi_restore 81
 409              		.cfi_def_cfa_offset 24
 410 008c BDE87083 		pop	{r4, r5, r6, r8, r9, pc}
 411              	.LVL29:
 412              	.L24:
 413              	.LCFI14:
 414              		.cfi_restore_state
 289:Src/main.c    ****   double tempval = (value<0) ? -1*value:value;
 415              		.loc 1 289 0
 416 0090 064E     		ldr	r6, .L26+16
 417 0092 C3E7     		b	.L15
 418              	.LVL30:
 419              	.L25:
 290:Src/main.c    ****   int tempInt1 = (int)tempval;
 420              		.loc 1 290 0 discriminator 1
 421 0094 B1EE488A 		vneg.f32	s16, s16
 422 0098 C5E7     		b	.L17
 423              	.L27:
 424 009a 00BF     		.align	2
 425              	.L26:
 426 009c 04000000 		.word	.LC1
 427 00a0 0050C347 		.word	1203982336
 428 00a4 08000000 		.word	.LC2
 429 00a8 00000000 		.word	huart2
 430 00ac 00000000 		.word	.LC0
 431              		.cfi_endproc
 432              	.LFE135:
 434              		.global	__aeabi_dmul
 435              		.section	.text.main,"ax",%progbits
 436              		.align	1
 437              		.global	main
 438              		.syntax unified
 439              		.thumb
 440              		.thumb_func
 441              		.fpu fpv4-sp-d16
 443              	main:
 444              	.LFB131:
 106:Src/main.c    ****   /* USER CODE BEGIN 1 */
 445              		.loc 1 106 0
 446              		.cfi_startproc
 447              		@ args = 0, pretend = 0, frame = 0
 448              		@ frame_needed = 0, uses_anonymous_args = 0
 449 0000 30B5     		push	{r4, r5, lr}
 450              	.LCFI15:
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 14


 451              		.cfi_def_cfa_offset 12
 452              		.cfi_offset 4, -12
 453              		.cfi_offset 5, -8
 454              		.cfi_offset 14, -4
 455 0002 83B0     		sub	sp, sp, #12
 456              	.LCFI16:
 457              		.cfi_def_cfa_offset 24
 115:Src/main.c    **** 
 458              		.loc 1 115 0
 459 0004 FFF7FEFF 		bl	HAL_Init
 460              	.LVL31:
 122:Src/main.c    **** 
 461              		.loc 1 122 0
 462 0008 FFF7FEFF 		bl	SystemClock_Config
 463              	.LVL32:
 129:Src/main.c    ****   MX_DMA_Init();
 464              		.loc 1 129 0
 465 000c FFF7FEFF 		bl	MX_GPIO_Init
 466              	.LVL33:
 130:Src/main.c    ****   MX_USART2_UART_Init();
 467              		.loc 1 130 0
 468 0010 FFF7FEFF 		bl	MX_DMA_Init
 469              	.LVL34:
 131:Src/main.c    ****   MX_I2C1_Init();
 470              		.loc 1 131 0
 471 0014 FFF7FEFF 		bl	MX_USART2_UART_Init
 472              	.LVL35:
 132:Src/main.c    ****   /* USER CODE BEGIN 2 */
 473              		.loc 1 132 0
 474 0018 FFF7FEFF 		bl	MX_I2C1_Init
 475              	.LVL36:
 134:Src/main.c    ****   // first time to read sensor value
 476              		.loc 1 134 0
 477 001c FFF7FEFF 		bl	BMX_Init
 478              	.LVL37:
 136:Src/main.c    ****   /* USER CODE END 2 */
 479              		.loc 1 136 0
 480 0020 0623     		movs	r3, #6
 481 0022 0193     		str	r3, [sp, #4]
 482 0024 664B     		ldr	r3, .L48+8
 483 0026 0093     		str	r3, [sp]
 484 0028 0123     		movs	r3, #1
 485 002a 0022     		movs	r2, #0
 486 002c 3221     		movs	r1, #50
 487 002e 6548     		ldr	r0, .L48+12
 488 0030 FFF7FEFF 		bl	HAL_I2C_Mem_Read_DMA
 489              	.LVL38:
 141:Src/main.c    ****   while (1) {
 490              		.loc 1 141 0
 491 0034 0022     		movs	r2, #0
 492 0036 80E0     		b	.L41
 493              	.LVL39:
 494              	.L46:
 149:Src/main.c    ****       Accl.xMSB = Accl_temp.xMSB;     
 495              		.loc 1 149 0
 496 0038 614A     		ldr	r2, .L48+8
 497 003a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 15


 498 003c 6249     		ldr	r1, .L48+16
 499 003e 0B70     		strb	r3, [r1]
 150:Src/main.c    ****       
 500              		.loc 1 150 0
 501 0040 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 502 0042 4A70     		strb	r2, [r1, #1]
 152:Src/main.c    ****       if(xAccl>2047) xAccl -= 4096;
 503              		.loc 1 152 0
 504 0044 03F0F003 		and	r3, r3, #240
 505 0048 03EB0223 		add	r3, r3, r2, lsl #8
 506 004c 1B11     		asrs	r3, r3, #4
 507 004e 07EE903A 		vmov	s15, r3	@ int
 508 0052 F8EEE77A 		vcvt.f32.s32	s15, s15
 509 0056 5D4B     		ldr	r3, .L48+20
 510 0058 C3ED007A 		vstr.32	s15, [r3]
 153:Src/main.c    ****       xAccl = xAccl*0.0098;
 511              		.loc 1 153 0
 512 005c 9FED5C7A 		vldr.32	s14, .L48+24
 513 0060 F4EEC77A 		vcmpe.f32	s15, s14
 514 0064 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 515 0068 05DD     		ble	.L31
 153:Src/main.c    ****       xAccl = xAccl*0.0098;
 516              		.loc 1 153 0 is_stmt 0 discriminator 1
 517 006a 9FED5A7A 		vldr.32	s14, .L48+28
 518 006e 77EEC77A 		vsub.f32	s15, s15, s14
 519 0072 C3ED007A 		vstr.32	s15, [r3]
 520              	.L31:
 154:Src/main.c    **** 
 521              		.loc 1 154 0 is_stmt 1
 522 0076 554D     		ldr	r5, .L48+20
 523 0078 2868     		ldr	r0, [r5]	@ float
 524 007a FFF7FEFF 		bl	__aeabi_f2d
 525              	.LVL40:
 526 007e 4EA3     		adr	r3, .L48
 527 0080 D3E90023 		ldrd	r2, [r3]
 528 0084 FFF7FEFF 		bl	__aeabi_dmul
 529              	.LVL41:
 530 0088 FFF7FEFF 		bl	__aeabi_d2f
 531              	.LVL42:
 532 008c 2860     		str	r0, [r5]	@ float
 156:Src/main.c    ****       Show_float("xAccl = ",xAccl);
 533              		.loc 1 156 0
 534 008e 0022     		movs	r2, #0
 535 0090 514B     		ldr	r3, .L48+32
 536 0092 1A70     		strb	r2, [r3]
 157:Src/main.c    ****     }
 537              		.loc 1 157 0
 538 0094 00EE100A 		vmov	s0, r0
 539 0098 5048     		ldr	r0, .L48+36
 540 009a FFF7FEFF 		bl	Show_float
 541              	.LVL43:
 542 009e 61E0     		b	.L29
 543              	.L47:
 161:Src/main.c    ****       Accl.yMSB = Accl_temp.yMSB;
 544              		.loc 1 161 0
 545 00a0 474A     		ldr	r2, .L48+8
 546 00a2 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 16


 547 00a4 4849     		ldr	r1, .L48+16
 548 00a6 8B70     		strb	r3, [r1, #2]
 162:Src/main.c    ****       
 549              		.loc 1 162 0
 550 00a8 D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 551 00aa CA70     		strb	r2, [r1, #3]
 164:Src/main.c    ****       if(yAccl>2047) yAccl -= 4096; 
 552              		.loc 1 164 0
 553 00ac 03F0F003 		and	r3, r3, #240
 554 00b0 03EB0223 		add	r3, r3, r2, lsl #8
 555 00b4 1B11     		asrs	r3, r3, #4
 556 00b6 07EE903A 		vmov	s15, r3	@ int
 557 00ba F8EEE77A 		vcvt.f32.s32	s15, s15
 558 00be 484B     		ldr	r3, .L48+40
 559 00c0 C3ED007A 		vstr.32	s15, [r3]
 165:Src/main.c    ****       yAccl = yAccl*0.0098;
 560              		.loc 1 165 0
 561 00c4 9FED427A 		vldr.32	s14, .L48+24
 562 00c8 F4EEC77A 		vcmpe.f32	s15, s14
 563 00cc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 564 00d0 05DD     		ble	.L35
 165:Src/main.c    ****       yAccl = yAccl*0.0098;
 565              		.loc 1 165 0 is_stmt 0 discriminator 1
 566 00d2 9FED407A 		vldr.32	s14, .L48+28
 567 00d6 77EEC77A 		vsub.f32	s15, s15, s14
 568 00da C3ED007A 		vstr.32	s15, [r3]
 569              	.L35:
 166:Src/main.c    **** 
 570              		.loc 1 166 0 is_stmt 1
 571 00de 404D     		ldr	r5, .L48+40
 572 00e0 2868     		ldr	r0, [r5]	@ float
 573 00e2 FFF7FEFF 		bl	__aeabi_f2d
 574              	.LVL44:
 575 00e6 34A3     		adr	r3, .L48
 576 00e8 D3E90023 		ldrd	r2, [r3]
 577 00ec FFF7FEFF 		bl	__aeabi_dmul
 578              	.LVL45:
 579 00f0 FFF7FEFF 		bl	__aeabi_d2f
 580              	.LVL46:
 581 00f4 2860     		str	r0, [r5]	@ float
 169:Src/main.c    ****       Show_float("yAccl = ",yAccl);
 582              		.loc 1 169 0
 583 00f6 0022     		movs	r2, #0
 584 00f8 3A4B     		ldr	r3, .L48+44
 585 00fa 1A70     		strb	r2, [r3]
 170:Src/main.c    **** 
 586              		.loc 1 170 0
 587 00fc 00EE100A 		vmov	s0, r0
 588 0100 3948     		ldr	r0, .L48+48
 589 0102 FFF7FEFF 		bl	Show_float
 590              	.LVL47:
 591 0106 31E0     		b	.L33
 592              	.L39:
 180:Src/main.c    ****       
 593              		.loc 1 180 0
 594 0108 384D     		ldr	r5, .L48+52
 595 010a 2868     		ldr	r0, [r5]	@ float
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 17


 596 010c FFF7FEFF 		bl	__aeabi_f2d
 597              	.LVL48:
 598 0110 29A3     		adr	r3, .L48
 599 0112 D3E90023 		ldrd	r2, [r3]
 600 0116 FFF7FEFF 		bl	__aeabi_dmul
 601              	.LVL49:
 602 011a FFF7FEFF 		bl	__aeabi_d2f
 603              	.LVL50:
 604 011e 2860     		str	r0, [r5]	@ float
 182:Src/main.c    ****       Show_float("zAccl = ",zAccl);
 605              		.loc 1 182 0
 606 0120 0022     		movs	r2, #0
 607 0122 334B     		ldr	r3, .L48+56
 608 0124 1A70     		strb	r2, [r3]
 183:Src/main.c    **** 
 609              		.loc 1 183 0
 610 0126 00EE100A 		vmov	s0, r0
 611 012a 3248     		ldr	r0, .L48+60
 612 012c FFF7FEFF 		bl	Show_float
 613              	.LVL51:
 614              	.L37:
 195:Src/main.c    **** 
 615              		.loc 1 195 0
 616 0130 4FF47A70 		mov	r0, #1000
 617 0134 FFF7FEFF 		bl	HAL_Delay
 618              	.LVL52:
 144:Src/main.c    ****     HAL_UART_Transmit(&huart2, (uint8_t *)(&k[0]), strlen(&k[0]), 100);
 619              		.loc 1 144 0
 620 0138 2246     		mov	r2, r4
 621              	.LVL53:
 622              	.L41:
 623 013a 541C     		adds	r4, r2, #1
 624 013c E4B2     		uxtb	r4, r4
 625              	.LVL54:
 626 013e 2E4D     		ldr	r5, .L48+64
 627 0140 2E49     		ldr	r1, .L48+68
 628 0142 2846     		mov	r0, r5
 629 0144 FFF7FEFF 		bl	sprintf
 630              	.LVL55:
 145:Src/main.c    **** 
 631              		.loc 1 145 0
 632 0148 2846     		mov	r0, r5
 633 014a FFF7FEFF 		bl	strlen
 634              	.LVL56:
 635 014e 6423     		movs	r3, #100
 636 0150 82B2     		uxth	r2, r0
 637 0152 2946     		mov	r1, r5
 638 0154 2A48     		ldr	r0, .L48+72
 639 0156 FFF7FEFF 		bl	HAL_UART_Transmit
 640              	.LVL57:
 148:Src/main.c    ****       Accl.xLSB = Accl_temp.xLSB;
 641              		.loc 1 148 0
 642 015a 1F4B     		ldr	r3, .L48+32
 643 015c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 644 015e 012B     		cmp	r3, #1
 645 0160 3FF46AAF 		beq	.L46
 646              	.L29:
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 18


 160:Src/main.c    ****       Accl.yLSB = Accl_temp.yLSB;
 647              		.loc 1 160 0
 648 0164 1F4B     		ldr	r3, .L48+44
 649 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 650 0168 012B     		cmp	r3, #1
 651 016a 99D0     		beq	.L47
 652              	.L33:
 174:Src/main.c    ****       Accl.zLSB = Accl_temp.zLSB;
 653              		.loc 1 174 0
 654 016c 204B     		ldr	r3, .L48+56
 655 016e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 656 0170 012B     		cmp	r3, #1
 657 0172 DDD1     		bne	.L37
 175:Src/main.c    ****       Accl.zMSB = Accl_temp.zMSB;
 658              		.loc 1 175 0
 659 0174 124A     		ldr	r2, .L48+8
 660 0176 1379     		ldrb	r3, [r2, #4]	@ zero_extendqisi2
 661 0178 1349     		ldr	r1, .L48+16
 662 017a 0B71     		strb	r3, [r1, #4]
 176:Src/main.c    **** 
 663              		.loc 1 176 0
 664 017c 5279     		ldrb	r2, [r2, #5]	@ zero_extendqisi2
 665 017e 4A71     		strb	r2, [r1, #5]
 178:Src/main.c    ****       if(zAccl>2047) zAccl -= 4096; 
 666              		.loc 1 178 0
 667 0180 03F0F003 		and	r3, r3, #240
 668 0184 03EB0223 		add	r3, r3, r2, lsl #8
 669 0188 1B11     		asrs	r3, r3, #4
 670 018a 07EE903A 		vmov	s15, r3	@ int
 671 018e F8EEE77A 		vcvt.f32.s32	s15, s15
 672 0192 164B     		ldr	r3, .L48+52
 673 0194 C3ED007A 		vstr.32	s15, [r3]
 179:Src/main.c    ****       zAccl = zAccl*0.0098;
 674              		.loc 1 179 0
 675 0198 9FED0D7A 		vldr.32	s14, .L48+24
 676 019c F4EEC77A 		vcmpe.f32	s15, s14
 677 01a0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 678 01a4 B0DD     		ble	.L39
 179:Src/main.c    ****       zAccl = zAccl*0.0098;
 679              		.loc 1 179 0 is_stmt 0 discriminator 1
 680 01a6 9FED0B7A 		vldr.32	s14, .L48+28
 681 01aa 77EEC77A 		vsub.f32	s15, s15, s14
 682 01ae C3ED007A 		vstr.32	s15, [r3]
 683 01b2 A9E7     		b	.L39
 684              	.L49:
 685 01b4 AFF30080 		.align	3
 686              	.L48:
 687 01b8 6EA301BC 		.word	-1140743314
 688 01bc 0512843F 		.word	1065619973
 689 01c0 00000000 		.word	.LANCHOR0
 690 01c4 00000000 		.word	hi2c1
 691 01c8 00000000 		.word	.LANCHOR4
 692 01cc 00000000 		.word	.LANCHOR5
 693 01d0 00E0FF44 		.word	1157619712
 694 01d4 00008045 		.word	1166016512
 695 01d8 00000000 		.word	.LANCHOR1
 696 01dc 10000000 		.word	.LC4
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 19


 697 01e0 00000000 		.word	.LANCHOR6
 698 01e4 00000000 		.word	.LANCHOR2
 699 01e8 1C000000 		.word	.LC5
 700 01ec 00000000 		.word	.LANCHOR7
 701 01f0 00000000 		.word	.LANCHOR3
 702 01f4 28000000 		.word	.LC6
 703 01f8 00000000 		.word	k
 704 01fc 00000000 		.word	.LC3
 705 0200 00000000 		.word	huart2
 706              		.cfi_endproc
 707              	.LFE131:
 709              		.section	.text.Error_Handler,"ax",%progbits
 710              		.align	1
 711              		.global	Error_Handler
 712              		.syntax unified
 713              		.thumb
 714              		.thumb_func
 715              		.fpu fpv4-sp-d16
 717              	Error_Handler:
 718              	.LFB136:
 298:Src/main.c    **** 
 299:Src/main.c    **** /* USER CODE END 4 */
 300:Src/main.c    **** 
 301:Src/main.c    **** /**
 302:Src/main.c    ****  * @brief  This function is executed in case of error occurrence.
 303:Src/main.c    ****  * @retval None
 304:Src/main.c    ****  */
 305:Src/main.c    **** void Error_Handler(void) {
 719              		.loc 1 305 0 is_stmt 1
 720              		.cfi_startproc
 721              		@ args = 0, pretend = 0, frame = 0
 722              		@ frame_needed = 0, uses_anonymous_args = 0
 723              		@ link register save eliminated.
 724 0000 7047     		bx	lr
 725              		.cfi_endproc
 726              	.LFE136:
 728              		.global	Accl
 729              		.global	Accl_temp
 730              		.comm	isI2CRunning,4,4
 731              		.comm	zGyro,4,4
 732              		.comm	yGyro,4,4
 733              		.comm	xGyro,4,4
 734              		.global	f
 735              		.global	zAccl
 736              		.global	yAccl
 737              		.global	xAccl
 738              		.global	iszready
 739              		.global	isyready
 740              		.global	isxready
 741              		.comm	k,100,4
 742              		.section	.bss.Accl,"aw",%nobits
 743              		.align	2
 744              		.set	.LANCHOR4,. + 0
 747              	Accl:
 748 0000 00000000 		.space	6
 748      0000
 749              		.section	.bss.Accl_temp,"aw",%nobits
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 20


 750              		.align	2
 751              		.set	.LANCHOR0,. + 0
 754              	Accl_temp:
 755 0000 00000000 		.space	6
 755      0000
 756              		.section	.bss.isxready,"aw",%nobits
 757              		.set	.LANCHOR1,. + 0
 760              	isxready:
 761 0000 00       		.space	1
 762              		.section	.bss.isyready,"aw",%nobits
 763              		.set	.LANCHOR2,. + 0
 766              	isyready:
 767 0000 00       		.space	1
 768              		.section	.bss.iszready,"aw",%nobits
 769              		.set	.LANCHOR3,. + 0
 772              	iszready:
 773 0000 00       		.space	1
 774              		.section	.bss.xAccl,"aw",%nobits
 775              		.align	2
 776              		.set	.LANCHOR5,. + 0
 779              	xAccl:
 780 0000 00000000 		.space	4
 781              		.section	.bss.yAccl,"aw",%nobits
 782              		.align	2
 783              		.set	.LANCHOR6,. + 0
 786              	yAccl:
 787 0000 00000000 		.space	4
 788              		.section	.bss.zAccl,"aw",%nobits
 789              		.align	2
 790              		.set	.LANCHOR7,. + 0
 793              	zAccl:
 794 0000 00000000 		.space	4
 795              		.section	.data.f,"aw",%progbits
 796              		.align	2
 799              	f:
 800 0000 C3F54840 		.word	1078523331
 801              		.section	.rodata.Show_float.str1.4,"aMS",%progbits,1
 802              		.align	2
 803              	.LC0:
 804 0000 2D00     		.ascii	"-\000"
 805 0002 0000     		.space	2
 806              	.LC1:
 807 0004 00       		.ascii	"\000"
 808 0005 000000   		.space	3
 809              	.LC2:
 810 0008 25732573 		.ascii	"%s%s%d.%04d\012\000"
 810      25642E25 
 810      3034640A 
 810      00
 811              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 812              		.align	2
 813              	.LC3:
 814 0000 6B616973 		.ascii	"kaisuu : %d\012\000"
 814      7575203A 
 814      2025640A 
 814      00
 815 000d 000000   		.space	3
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 21


 816              	.LC4:
 817 0010 78416363 		.ascii	"xAccl = \000"
 817      6C203D20 
 817      00
 818 0019 000000   		.space	3
 819              	.LC5:
 820 001c 79416363 		.ascii	"yAccl = \000"
 820      6C203D20 
 820      00
 821 0025 000000   		.space	3
 822              	.LC6:
 823 0028 7A416363 		.ascii	"zAccl = \000"
 823      6C203D20 
 823      00
 824              		.text
 825              	.Letext0:
 826              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\mach
 827              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\sys\
 828              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 829              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 830              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l476xx.h"
 831              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 832              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_rcc.h"
 833              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_rcc_ex.h"
 834              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 835              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 836              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_i2c.h"
 837              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.h"
 838              		.file 14 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 839              		.file 15 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\sys
 840              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\sys
 841              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\lib\\gcc\\arm-none-eabi\\6.
 842              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\sys
 843              		.file 19 "Inc/i2c.h"
 844              		.file 20 "Inc/usart.h"
 845              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\std
 846              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\6.2 2016q4\\arm-none-eabi\\include\\str
 847              		.file 23 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_pwr_ex.h"
 848              		.file 24 "Inc/gpio.h"
 849              		.file 25 "Inc/dma.h"
 850              		.file 26 "<built-in>"
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 22


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:18     .text.SystemClock_Config:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:25     .text.SystemClock_Config:00000000 SystemClock_Config
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:131    .text.BMX_Init:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:138    .text.BMX_Init:00000000 BMX_Init
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:221    .text.BMX_Init:00000070 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:226    .text.HAL_I2C_MemRxCpltCallback:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:233    .text.HAL_I2C_MemRxCpltCallback:00000000 HAL_I2C_MemRxCpltCallback
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:293    .text.HAL_I2C_MemRxCpltCallback:00000040 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:305    .text.Show_float:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:312    .text.Show_float:00000000 Show_float
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:426    .text.Show_float:0000009c $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:436    .text.main:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:443    .text.main:00000000 main
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:687    .text.main:000001b8 $d
                            *COM*:00000064 k
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:710    .text.Error_Handler:00000000 $t
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:717    .text.Error_Handler:00000000 Error_Handler
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:747    .bss.Accl:00000000 Accl
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:754    .bss.Accl_temp:00000000 Accl_temp
                            *COM*:00000004 isI2CRunning
                            *COM*:00000004 zGyro
                            *COM*:00000004 yGyro
                            *COM*:00000004 xGyro
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:799    .data.f:00000000 f
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:793    .bss.zAccl:00000000 zAccl
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:786    .bss.yAccl:00000000 yAccl
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:779    .bss.xAccl:00000000 xAccl
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:772    .bss.iszready:00000000 iszready
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:766    .bss.isyready:00000000 isyready
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:760    .bss.isxready:00000000 isxready
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:743    .bss.Accl:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:750    .bss.Accl_temp:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:761    .bss.isxready:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:767    .bss.isyready:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:773    .bss.iszready:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:775    .bss.xAccl:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:782    .bss.yAccl:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:789    .bss.zAccl:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:796    .data.f:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:802    .rodata.Show_float.str1.4:00000000 $d
C:\Users\hirot\AppData\Local\Temp\cctOms56.s:812    .rodata.main.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
memset
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
HAL_PWREx_ControlVoltageScaling
HAL_I2C_Mem_Write
HAL_Delay
hi2c1
HAL_I2C_Mem_Read_DMA
__aeabi_f2d
__aeabi_i2d
ARM GAS  C:\Users\hirot\AppData\Local\Temp\cctOms56.s 			page 23


__aeabi_dsub
__aeabi_d2f
sprintf
strlen
HAL_UART_Transmit
huart2
__aeabi_dmul
HAL_Init
MX_GPIO_Init
MX_DMA_Init
MX_USART2_UART_Init
MX_I2C1_Init
